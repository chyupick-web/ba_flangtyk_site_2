!function(){"use strict";var e=window.rapidPageConfig,t=window.YAHOO,n=t.context.meta,a=void 0===n?{}:n;a.siteAttribute,a.xhrPathPrefix,a.url;var i=e.rapidConfig;i&&i.keys,t.i13n&&t.i13n.SPACEID,function(e){var t=e.rapidInstance,n=e.rapidPageConfig,a=e.wafer,i=e.YAHOO,o=i.context,s=o.device,r=void 0===s?"desktop":s,c=o.feature,d=void 0===c?"":c,m=o.lang,p=o.meta,f=void 0===p?{}:p,l=o.region,u=o.site,v={},g="smartphone"===r,y=function(e){var t={},n=function(n){if(e.hasOwnProperty(n)){var a=e[n];Array.isArray(a)?(t[n]=[],a.forEach((function(e){t[n].push(e)}))):"function"==typeof a||(Object(a)===a?t[n]=Object.assign({},a):t[n]=a)}};for(var a in e)n(a);return t}(n.rapidConfig),C=y.keys;C.p_cpos="",C.pct="comments";var w=f.uuid,h=-1!==String(d).indexOf("enableSpotIm");function b(n){n.preventDefault(),n.stopPropagation();var a=g?"community-bar-iframe":"community-bar-"+w+"-iframe",i=document.getElementById(a),o=function(t,n,a,i,s){var r=n-t,c=r/a;c=Math.min(c,1);var d,m=(d=c)*d*d;e.scroll(0,s+i*m),r<a&&requestAnimationFrame((function(e){var n=e||(new Date).getTime();o(t,n,a,i,s)}))};t&&t.beaconClick("cmmts","Reaction",0,{elm:"cmmt_open",g:w,itc:0},null);var s=i&&i.contentWindow;s&&(s.postMessage("canvass:expand","*"),g||requestAnimationFrame((function(t){var n=t||(new Date).getTime(),a=n,s=e.pageYOffset,r=i.getBoundingClientRect().top+-150;o(a,n,1e3,r,s)})))}!function(n){var o=n.commentsAllowed,s=n.messageId,c=n.publisher,p=n.replyId,x=n.title,O=n.type,_=n.contentType,A=n.url,I=n.uuid,M=f.xhrPathPrefix,P=void 0===M?"/nel_ms/_td/remote":M;if(!o||!I||h)return console.error("[comments] comments not allowed on this page, uuid missing or not needed due to SpotIm testing"),null;var S=g?"community-bar":"community-bar-"+I,E=!g&&-1!==d.indexOf("disableCommentsMessage");if(!v[I]){var k=n.spaceId||i.i13n&&i.i13n.SPACEID;w=I,C.pstaid_p=w,C.pstaid=w,O&&(C.pt=O),c&&(C.pcp=c);try{var D=0;if(document&&document.location.search.indexOf("bcmt")>=1&&(D=1),-1===d.indexOf("disableContentComments")&&-1===d.indexOf("disableCommentsMessage")||(D=0),v[I]=!0,E&&a.base){var T=document.getElementById(S),j=P.replace("rcv","td");j+="?m_mode=json&m_id=tdv2-applet-canvass.message&ctrl=CanvassMessage",j+="&context="+I+"&device="+r+"&site="+u+"&region="+l+"&lang="+m;var F='<div class="wafer-fetch" data-wf-trigger="onLoad" data-wf-cache-strategy="cacheFirst" data-wf-replace="1" data-wf-body='+JSON.stringify({config:{ui:{enableFeedback:!1}},ctrl:"CanvassMessage",m_id:"tdv2-applet-canvass.message",m_mode:"json"})+" data-wf-url="+j+"></div>";return T.innerHTML=F,void a.base.sync(T)}if(!i.CanvassComments)return void console.error("[comments] Missing required window.YAHOO.CanvassComments object");var H={apptype:"default",bucket:y.test_id||"",context:I||"",contextDisplayText:x.replace(/'/g,"%27")||"",contextUrl:A||"",device:r,expanded:D,lang:m,namespace:"preview"===_?"yahoo_offnet":"yahoo_content",prid:C._rid||"",rapid:t,rapidKeys:C,region:l,site:u,spaceid:k,theme:"redesign",themeContainerClasses:"Ff(YahooSans)",trafficSource:g&&"article_20",useRelativeHostName:1};s&&(H.messageId=s,p&&(H.replyId=p)),e.CAAS_COMMENTS=new i.CanvassComments(S,H);for(var Y=document.getElementsByClassName("caas-comment"),B=0;B<Y.length;B++)Y[B].addEventListener("click",b)}catch(e){}}}(f)}(window)}();
//# sourceMappingURL=comments.js.map
